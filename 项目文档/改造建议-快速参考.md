# Perplexica 学生答疑系统改造 - 快速参考

## 🎯 核心改造方向

### 定位转变
- **原定位**: 隐私优先的 AI 搜索引擎
- **新定位**: 智能学习辅导系统

---

## 📊 数据库扩展（必做）

### 新增表
1. **`knowledge_points`** - 知识点库
2. **`question_bank`** - 题库
3. **`wrong_questions`** - 错题本
4. **`study_progress`** - 学习进度
5. **`study_sessions`** - 学习会话
6. **`homework`** - 作业管理

### 扩展现有表
- `chats` 表：添加 `subject`（学科）、`grade`（年级）、`topic`（主题）
- `messages` 表：添加 `questionType`（问题类型）、`knowledgePoints`（知识点）

---

## 🔄 功能模式重构

### 替换现有搜索模式

**学科模式**（6个）
- `math` - 数学（公式识别、步骤化解题）
- `physics` - 物理
- `chemistry` - 化学
- `english` - 英语（语法、写作）
- `chinese` - 语文（阅读、作文）
- `programming` - 编程

**学习场景模式**（4个）
- `homework` - 作业模式（引导式，不直接给答案）
- `review` - 复习模式（知识点梳理）
- `test` - 测试模式（限时答题）
- `explain` - 讲解模式（概念解释）

---

## 🎨 UI 组件新增

### 核心组件
1. **`QuestionInput`** - 题目输入（支持拍照、OCR）
2. **`StepByStepSolution`** - 分步解题显示
3. **`KnowledgeGraph`** - 知识点图谱可视化
4. **`StudyProgress`** - 学习进度仪表盘
5. **`WrongQuestionBook`** - 错题本界面
6. **`HomeworkTracker`** - 作业跟踪

---

## 🤖 提示词优化重点

### 核心原则
- **不直接给答案**，而是引导思考
- **分步骤讲解**，解释每一步的原因
- **关联知识点**，建立知识体系
- **举一反三**，提供相似题目

### 关键提示词
```
作业模式：启发式引导 → 知识回顾 → 思路分析 → 步骤讲解 → 检查验证
复习模式：知识框架 → 重点难点 → 知识关联 → 记忆方法 → 易错提醒
讲解模式：概念解释 → 典型例题 → 多种解法 → 总结归纳
```

---

## 📡 API 端点扩展

### 新增路由
```
/api/questions/parse          # 题目解析
/api/questions/step-by-step   # 分步解题
/api/knowledge/points         # 知识点查询
/api/knowledge/graph          # 知识图谱
/api/study/progress           # 学习进度
/api/wrong-questions/         # 错题本CRUD
/api/homework/                # 作业管理
/api/ocr/                     # OCR识别
```

---

## ⚙️ 技术集成

### 必需工具
- **MathJax/KaTeX** - 数学公式渲染
- **OCR API** - 题目图片识别
- **TTS API** - 语音回答（可选）
- **图表生成库** - 数学/物理图形

---

## 📅 开发优先级

### 🚀 第一阶段（MVP）
1. 数据库扩展
2. 学科模式（至少数学模式）
3. 作业模式提示词
4. 基础错题本
5. 分步解题组件

### ⭐ 第二阶段
1. 知识点关联系统
2. 学习进度跟踪
3. 复习计划（遗忘曲线）
4. 题目推荐算法

### 🔮 第三阶段
1. OCR 识别
2. 语音功能
3. 知识图谱可视化
4. 学习分析报告

---

## 💡 关键改造点

### 1. 提示词改变
```
从：搜索并总结信息
到：引导思考、分步讲解、知识关联
```

### 2. 交互改变
```
从：搜索问答
到：学习对话、题目解析、复习辅导
```

### 3. 数据改变
```
从：聊天历史
到：学习记录、错题本、知识图谱
```

---

## 🎯 成功指标

- ✅ 学生能通过引导自己找到答案
- ✅ 知识点能正确关联和推荐
- ✅ 错题能有效复习和巩固
- ✅ 学习进度可视化且有意义
- ✅ 题目解析准确且有教育价值

---

**快速决策树**

1. **是否支持多学科？** → 是：实现学科模式 | 否：先做单一学科
2. **是否直接给答案？** → 否：作业模式引导 | 是：讲解模式
3. **是否记录学习？** → 是：实现进度跟踪 | 否：先做基础功能
4. **是否支持拍照？** → 是：集成OCR | 否：手动输入
5. **是否多人使用？** → 是：用户系统 | 否：单用户模式

---

**下一步行动**
1. 确认核心需求（哪些功能是必须的）
2. 设计数据库迁移方案
3. 选择优先实现的学科和模式
4. 设计提示词模板
5. 规划开发时间线

